# PTtools - PTå·¥å…·ä¸€é”®å®‰è£…è„šæœ¬

[![GitHub](https://img.shields.io/github/license/everett7623/PTtools)](https://github.com/everett7623/PTtools/blob/main/LICENSE)
[![GitHub stars](https://img.shields.io/github/stars/everett7623/PTtools)](https://github.com/everett7623/PTtools/stargazers)

## ç®€ä»‹

PTtools æ˜¯ä¸€ä¸ªä¸º PT (Private Tracker) ç”¨æˆ·è®¾è®¡çš„ä¸€é”®å®‰è£…è„šæœ¬ï¼Œæ—¨åœ¨å¸®åŠ©æ–°æ‰‹å¿«é€Ÿéƒ¨ç½²å¸¸ç”¨çš„ PT å·¥å…·ã€‚è„šæœ¬é’ˆå¯¹ VPS ç¯å¢ƒè¿›è¡Œäº†ä¼˜åŒ–ï¼Œç‰¹åˆ«é€‚åˆç”¨äº PT åˆ·æµã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸš€ ä¸€é”®å®‰è£…å¸¸ç”¨ PT å·¥å…·
- ğŸ”§ é’ˆå¯¹ VPS ä¼˜åŒ–é…ç½®
- ğŸ³ åŸºäº Docker çš„åº”ç”¨ç®¡ç†
- ğŸ“¦ æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•
- ğŸ›¡ï¸ è‡ªåŠ¨é…ç½®é˜²ç«å¢™è§„åˆ™
- ğŸ”„ æ”¯æŒåº”ç”¨å¸è½½å’Œæ›´æ–°

## å¿«é€Ÿå¼€å§‹

### ä¸€é”®å®‰è£…ï¼ˆä¸»è„šæœ¬ï¼‰

```bash
wget -O pttools.sh https://raw.githubusercontent.com/everett7623/PTtools/main/pttools.sh && chmod +x pttools.sh && ./pttools.sh
```

### å…¶ä»–å®‰è£…æ–¹å¼

#### é™æ€ç‰ˆæœ¬å®‰è£…ï¼ˆæœ€å¿«ï¼‰
```bash
wget -O install-qb-static.sh https://raw.githubusercontent.com/everett7623/PTtools/main/install-qb-static.sh && chmod +x install-qb-static.sh && ./install-qb-static.sh
```

#### ç¼–è¯‘å®‰è£…ï¼ˆæœ€ç¨³å®šï¼‰
```bash
wget -O compile-qb.sh https://raw.githubusercontent.com/everett7623/PTtools/main/compile-qb.sh && chmod +x compile-qb.sh && ./compile-qb.sh
```

#### å¿«é€Ÿä¿®å¤
```bash
wget -O fix.sh https://raw.githubusercontent.com/everett7623/PTtools/main/fix.sh && chmod +x fix.sh && ./fix.sh
```

### ç³»ç»Ÿè¦æ±‚

- æ“ä½œç³»ç»Ÿï¼šUbuntu 18.04+, Debian 9+, CentOS 7+
- æƒé™ï¼šéœ€è¦ root æƒé™
- æ¶æ„ï¼šx86_64
- å†…å­˜ï¼šå»ºè®® 2GB ä»¥ä¸Š
- ç¡¬ç›˜ï¼šå»ºè®® 20GB ä»¥ä¸Š

## ç›®å½•ç»“æ„

```
PTtools/
â”œâ”€â”€ pttools.sh                    # ä¸»è„šæœ¬
â”œâ”€â”€ fix.sh                        # å¿«é€Ÿä¿®å¤è„šæœ¬
â”œâ”€â”€ compile-qb.sh                 # ç¼–è¯‘å®‰è£…è„šæœ¬
â”œâ”€â”€ install-qb-static.sh          # é™æ€ç‰ˆæœ¬å®‰è£…è„šæœ¬
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ install/
â”‚       â”œâ”€â”€ qb438.sh             # qBittorrent 4.3.8 å®‰è£…è„šæœ¬
â”‚       â”œâ”€â”€ qb439.sh             # qBittorrent 4.3.9 å®‰è£…è„šæœ¬
â”‚       â””â”€â”€ applications/
â”‚           â””â”€â”€ vertex.sh        # Vertex å®‰è£…è„šæœ¬
â””â”€â”€ configs/
    â””â”€â”€ docker-compose/
        â””â”€â”€ vertex.yml           # Vertex Docker Compose é…ç½®ï¼ˆå·²é›†æˆåˆ°è„šæœ¬ä¸­ï¼‰
```

## å®‰è£…æ–¹å¼å¯¹æ¯”

| å®‰è£…æ–¹å¼ | é€Ÿåº¦ | ç¨³å®šæ€§ | é€‚ç”¨åœºæ™¯ |
|---------|------|--------|---------|
| ä¸»è„šæœ¬ï¼ˆé¢„ç¼–è¯‘ä¼˜å…ˆï¼‰ | å¿« | ä¸­ | ä¸€èˆ¬ç”¨æˆ· |
| é™æ€ç‰ˆæœ¬ | æœ€å¿« | é«˜ | å¿«é€Ÿéƒ¨ç½² |
| ç¼–è¯‘å®‰è£… | æ…¢ | æœ€é«˜ | è¿½æ±‚ç¨³å®š |

### æ¨èå®‰è£…æµç¨‹

1. **é¦–é€‰**ï¼šä½¿ç”¨ä¸»è„šæœ¬ `pttools.sh`
2. **å¦‚æœå¤±è´¥**ï¼šä½¿ç”¨é™æ€ç‰ˆæœ¬ `install-qb-static.sh`
3. **ç»ˆææ–¹æ¡ˆ**ï¼šç¼–è¯‘å®‰è£… `compile-qb.sh`

## å½“å‰æ”¯æŒçš„åº”ç”¨

### æ ¸å¿ƒé¡¹ç›®ï¼ˆå·²å®Œæˆï¼‰

1. **qBittorrent 4.3.8** - ç»å…¸ç¨³å®šç‰ˆæœ¬ï¼ˆé…åˆ libtorrent 1.2.20ï¼‰
2. **qBittorrent 4.3.9** - æœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼ˆé…åˆ libtorrent 1.2.20ï¼‰
3. **qBittorrent 4.3.8 + Vertex** - ç»„åˆå®‰è£…
4. **qBittorrent 4.3.9 + Vertex** - ç»„åˆå®‰è£…

### è®¡åˆ’æ”¯æŒçš„åº”ç”¨

- ä¸‹è½½ç®¡ç†ï¼šTransmission
- è‡ªåŠ¨åŒ–ç®¡ç†ï¼šIYUUPlus, MoviePilot, Sonarr, Radarr
- åª’ä½“æœåŠ¡å™¨ï¼šEmby, Jellyfin, Plex
- æ›´å¤šå·¥å…·æ­£åœ¨å¼€å‘ä¸­...

## ä½¿ç”¨è¯´æ˜

### å®‰è£…åº”ç”¨

1. è¿è¡Œä¸»è„šæœ¬ï¼š`./pttools.sh`
2. é€‰æ‹©è¦å®‰è£…çš„åº”ç”¨ï¼ˆè¾“å…¥å¯¹åº”æ•°å­—ï¼‰
3. æŒ‰ç…§æç¤ºå®Œæˆå®‰è£…
4. è®°å½•æ˜¾ç¤ºçš„è®¿é—®åœ°å€å’Œç™»å½•ä¿¡æ¯

### é»˜è®¤é…ç½®

- Docker å®‰è£…è·¯å¾„ï¼š`/opt/docker`
- qBittorrent é…ç½®è·¯å¾„ï¼š`/root/.config/qBittorrent`
- ä¸‹è½½ç›®å½•ï¼š`/opt/downloads`
- qBittorrent Web UI ç«¯å£ï¼š8080
- qBittorrent BT ç«¯å£ï¼š25000
- Vertex ç«¯å£ï¼š3334
- é»˜è®¤ç¼“å­˜å¤§å°ï¼š3072 MB

### é»˜è®¤ç™»å½•ä¿¡æ¯

- qBittorrent
  - ç”¨æˆ·åï¼šadmin
  - å¯†ç ï¼šadminadmin
  
- Vertex
  - é»˜è®¤æ— éœ€è®¤è¯

**âš ï¸ é‡è¦ï¼šè¯·åœ¨é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼**

### ç®¡ç†å‘½ä»¤

#### qBittorrent
```bash
systemctl start qbittorrent    # å¯åŠ¨
systemctl stop qbittorrent     # åœæ­¢
systemctl restart qbittorrent  # é‡å¯
systemctl status qbittorrent   # æŸ¥çœ‹çŠ¶æ€
journalctl -u qbittorrent -f   # æŸ¥çœ‹å®æ—¶æ—¥å¿—
```

#### Vertex
```bash
cd /opt/docker/vertex
docker-compose up -d           # å¯åŠ¨
docker-compose down            # åœæ­¢
docker-compose restart         # é‡å¯
docker logs -f vertex          # æŸ¥çœ‹æ—¥å¿—
```

### æœåŠ¡è¯Šæ–­

è„šæœ¬å†…ç½®äº†æœåŠ¡è¯Šæ–­åŠŸèƒ½ï¼Œå¯ä»¥å¿«é€Ÿæ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š

1. è¿è¡Œä¸»è„šæœ¬ï¼š`./pttools.sh`
2. é€‰æ‹© "7. æœåŠ¡è¯Šæ–­"
3. æŸ¥çœ‹å„é¡¹æœåŠ¡çŠ¶æ€å’Œç³»ç»Ÿä¿¡æ¯

## VPS ä¼˜åŒ–è¯´æ˜

è„šæœ¬ä¼šè‡ªåŠ¨åº”ç”¨ä»¥ä¸‹ä¼˜åŒ–ï¼š

1. **ç³»ç»Ÿä¼˜åŒ–**
   - å¯ç”¨ BBR æ‹¥å¡æ§åˆ¶
   - ä¼˜åŒ– TCP å‚æ•°
   - å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶

2. **qBittorrent ä¼˜åŒ–**
   - ç¦ç”¨ä¸å¿…è¦çš„åŠŸèƒ½
   - ä¼˜åŒ–ç¼“å­˜è®¾ç½®
   - é…ç½®é€‚åˆåˆ·æµçš„å‚æ•°

3. **ç½‘ç»œä¼˜åŒ–**
   - è‡ªåŠ¨é…ç½®é˜²ç«å¢™è§„åˆ™
   - ä¼˜åŒ–è¿æ¥æ•°é™åˆ¶

## æŠ€æœ¯ç»†èŠ‚

### ç‰ˆæœ¬ä¿¡æ¯
- **libtorrent-rasterbar**: 1.2.20
- **qBittorrent**: 4.3.8 / 4.3.9
- **ç¼–è¯‘ä¼˜åŒ–**: å¯ç”¨åŠ å¯†ï¼Œç¦ç”¨è°ƒè¯•

### å®‰è£…æ–¹å¼
æœ¬è„šæœ¬é‡‡ç”¨äº†ä¼˜åŒ–çš„å®‰è£…æ–¹å¼ï¼š
1. **ä¼˜å…ˆä½¿ç”¨é¢„ç¼–è¯‘ç‰ˆæœ¬**ï¼šå¤§å¹…å‡å°‘å®‰è£…æ—¶é—´
2. **è‡ªåŠ¨é™çº§åˆ°ç¼–è¯‘å®‰è£…**ï¼šå½“é¢„ç¼–è¯‘ç‰ˆæœ¬ä¸å¯ç”¨æ—¶
3. **ä¼˜åŒ–çš„ç¼–è¯‘å‚æ•°**ï¼š`-O3 -march=native` æå‡æ€§èƒ½

### ç¼–è¯‘å‚æ•°
- libtorrent: `--disable-debug --enable-encryption`
- qBittorrent: `--disable-gui --disable-debug`
- ç¼–è¯‘ä¼˜åŒ–: `CXXFLAGS="-O3 -march=native -pipe"`

### æ€§èƒ½ä¼˜åŒ–
- **ç¼“å­˜ä¼˜åŒ–**ï¼šé»˜è®¤ 3GB ç¼“å­˜ï¼Œå¯æ ¹æ®å†…å­˜è°ƒæ•´
- **è¿æ¥ä¼˜åŒ–**ï¼šå¼‚æ­¥ IO çº¿ç¨‹æ•°è®¾ä¸º 8
- **æ–‡ä»¶æ± **ï¼š500 ä¸ªæ–‡ä»¶å¥æŸ„
- **BBR æ‹¥å¡æ§åˆ¶**ï¼šè‡ªåŠ¨å¯ç”¨

## å¸è½½åº”ç”¨

1. è¿è¡Œä¸»è„šæœ¬ï¼š`./pttools.sh`
2. é€‰æ‹© "6. å¸è½½ç®¡ç†"
3. é€‰æ‹©è¦å¸è½½çš„åº”ç”¨æˆ–å…¨éƒ¨å¸è½½

## æ•…éšœæ’é™¤

### å¿«é€Ÿä¿®å¤

å¦‚æœé‡åˆ°æœåŠ¡æ— æ³•å¯åŠ¨çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å¿«é€Ÿä¿®å¤è„šæœ¬ï¼š

```bash
wget -O fix.sh https://raw.githubusercontent.com/everett7623/PTtools/main/fix.sh && chmod +x fix.sh && ./fix.sh
```

### ç¼–è¯‘å®‰è£…ï¼ˆæ¨èï¼‰

å¦‚æœé¢„ç¼–è¯‘ç‰ˆæœ¬å‡ºç°å…¼å®¹æ€§é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨ç¼–è¯‘å®‰è£…ï¼š

```bash
wget -O compile-qb.sh https://raw.githubusercontent.com/everett7623/PTtools/main/compile-qb.sh && chmod +x compile-qb.sh && ./compile-qb.sh
```

ç¼–è¯‘å®‰è£…é€‰é¡¹ï¼š
- é»˜è®¤å®‰è£… qBittorrent 4.3.9 + libtorrent 1.2.20
- è‡ªå®šä¹‰ç‰ˆæœ¬ï¼š`./compile-qb.sh -q 4.3.8 -l 1.2.20`
- æŸ¥çœ‹å¸®åŠ©ï¼š`./compile-qb.sh -h`

### å¸¸è§é—®é¢˜

#### 1. Exec format error
- **åŸå› **ï¼šé¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶æ¶æ„ä¸åŒ¹é…
- **å¿«é€Ÿè§£å†³**ï¼š
  ```bash
  # ä½¿ç”¨é™æ€ç‰ˆæœ¬
  ./install-qb-static.sh
  
  # æˆ–ç¼–è¯‘å®‰è£…
  ./compile-qb.sh
  ```

#### 2. 502 Bad Gateway é”™è¯¯
- **åŸå› **ï¼šqBittorrent æœåŠ¡æœªæ­£å¸¸å¯åŠ¨
- **è§£å†³æ–¹æ¡ˆ**ï¼š
  ```bash
  # æ£€æŸ¥æœåŠ¡çŠ¶æ€
  systemctl status qbittorrent
  
  # æŸ¥çœ‹é”™è¯¯æ—¥å¿—
  journalctl -u qbittorrent -f
  
  # é‡å¯æœåŠ¡
  systemctl restart qbittorrent
  ```

#### 2. Vertex å®‰è£…å¤±è´¥ï¼ˆ404é”™è¯¯ï¼‰
- **åŸå› **ï¼šé…ç½®æ–‡ä»¶è·¯å¾„é”™è¯¯
- **è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„è„šæœ¬ï¼ˆå·²ä¿®å¤ï¼‰

#### 3. æç¤ºæƒé™ä¸è¶³
- ç¡®ä¿ä½¿ç”¨ root ç”¨æˆ·æˆ–ä½¿ç”¨ sudo è¿è¡Œè„šæœ¬

#### 4. Docker å®‰è£…å¤±è´¥
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- å°è¯•ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒå®‰è£…

#### 5. æ— æ³•è®¿é—® Web UI
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- ç¡®è®¤æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š`./pttools.sh` é€‰æ‹© "7. æœåŠ¡è¯Šæ–­"
- æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`netstat -tuln | grep 8080`

#### 6. qBittorrent ç¼–è¯‘å¤±è´¥
- ç¡®ä¿ç³»ç»Ÿæœ‰è¶³å¤Ÿçš„å†…å­˜ï¼ˆè‡³å°‘ 2GBï¼‰
- æ£€æŸ¥æ˜¯å¦å®‰è£…äº†æ‰€æœ‰ä¾èµ–
- å°è¯•ä½¿ç”¨é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼ˆæ–°ç‰ˆè„šæœ¬é»˜è®¤ä½¿ç”¨ï¼‰

### æœåŠ¡ç®¡ç†å‘½ä»¤

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘æ–°çš„å®‰è£…è„šæœ¬

1. åœ¨ `scripts/install/` ç›®å½•ä¸‹åˆ›å»ºè„šæœ¬
2. é…ç½®æ–‡ä»¶å¯ä»¥ç›´æ¥é›†æˆåˆ°è„šæœ¬ä¸­ï¼ˆæ¨èï¼‰æˆ–æ”¾åœ¨ `configs/` ç›®å½•
3. æ›´æ–°ä¸»è„šæœ¬ `pttools.sh` æ·»åŠ æ–°é€‰é¡¹
4. æµ‹è¯•å¹¶æäº¤ PR

### è„šæœ¬è§„èŒƒ

- ä½¿ç”¨ç»Ÿä¸€çš„é¢œè‰²å®šä¹‰å’Œæ¶ˆæ¯å‡½æ•°
- æä¾›è¯¦ç»†çš„å®‰è£…è¿›åº¦æç¤º
- åŒ…å«é”™è¯¯å¤„ç†å’Œå›æ»šæœºåˆ¶
- ä¼˜åŒ–å®‰è£…é€Ÿåº¦ï¼ˆä¼˜å…ˆä½¿ç”¨é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼‰

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## å…è´£å£°æ˜

- æœ¬è„šæœ¬ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨
- ä½¿ç”¨æœ¬è„šæœ¬é€ æˆçš„ä»»ä½•åæœç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…
- è¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„å’Œ PT ç«™ç‚¹è§„åˆ™

## æ›´æ–°æ—¥å¿—

### v1.0.1 (2024-12)
- ä¿®å¤ qBittorrent "Exec format error" é—®é¢˜
- æ·»åŠ æ–‡ä»¶éªŒè¯æœºåˆ¶
- æ–°å¢é™æ€ç‰ˆæœ¬å®‰è£…è„šæœ¬
- æ–°å¢ç‹¬ç«‹ç¼–è¯‘å®‰è£…è„šæœ¬
- æ”¹è¿›é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º
- ä¼˜åŒ–å®‰è£…æµç¨‹

### v1.0.0 (2024-12)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒ qBittorrent 4.3.8/4.3.9 å®‰è£…
- æ”¯æŒ Vertex å®‰è£…
- ä¼˜åŒ–å®‰è£…é€Ÿåº¦ï¼ˆä½¿ç”¨é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼‰
- æ·»åŠ æœåŠ¡è¯Šæ–­åŠŸèƒ½
- æ·»åŠ å¿«é€Ÿä¿®å¤å·¥å…·
- ä¿®å¤é…ç½®æ–‡ä»¶è·¯å¾„é—®é¢˜

## è‡´è°¢

- æ„Ÿè°¢ [jerry048](https://github.com/jerry048/Dedicated-Seedbox) çš„ä¼˜ç§€è„šæœ¬æä¾›å‚è€ƒ
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œä½¿ç”¨è€…çš„æ”¯æŒï¼

---

**ä½œè€…ï¼š** everett7623  
**GitHubï¼š** https://github.com/everett7623/PTtools
